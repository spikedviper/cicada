<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

    <script type="text/javascript" src="Scripts/datepicker-ru.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="Scripts/markerwithlabel.js"></script>

    <script src="config.js"></script>
    <script src="Scripts/WebApi.js"></script>
    <script src="Scripts/Device.js"></script>
    <script src="Scripts/Main.js"></script>
    <script src="Scripts/WhereExtension.js"></script>

    <link rel="stylesheet" href="Scripts/webix.css" type="text/css" media="screen" charset="utf-8">
    <script src="Scripts/webix.js" type="text/javascript" charset="utf-8"></script>
    <title>Цикада: карта</title>


    <style type="text/css">
        .labels {
            color: red;
            background-color: white;
            font-family: "Lucida Grande", "Arial", sans-serif;
            font-size: 10px;
            font-weight: bold;
            text-align: center;
            width: 40px;
            border: 2px solid black;
            white-space: nowrap;
        }
    </style>

    <script>

        var main;
        $(function () {
            $("#calendar").datepicker({
                onSelect: function (dateText) {
                    main.OnDeviceDateChanged($(this).datepicker('getDate'));
                }
            });

            main = new Ts.Main("leftmenu", "googlemaps");
        });

        function foo(f) {
            debugger;
            main.OnDeviceSelected(f);
        }
    </script>

    <style>
        #calendar {
            font-size:11px;
            width: 200px;
        }
    </style>
</head>

<body>
<script type="text/javascript" charset="utf-8">
    grid = webix.ui({
        rows:[
            { type:"header", template:"Цикада" },
            { cols:[
                {rows:[
                    {view:"toolbar", elements:[{view:"text", id: "list_input"}] },
                    {view: 'list', id: 'leftmenu', url: '/devlist', select: 1, template: ' <span class="device">#name#</span>', tooltip:{template: '<b>IMEI:</b> #imei#<br><b>Имя устройства:</b> #name#'},
                        onClick:{
                            device:function(e, imei){
                            webix.message('device id: ' + imei);
                        }
                    }},
                    {body: '<div id="calendar"></div>', width: 215, height: 220}
                ]},
                { view:"resizer" },
                { body:'<div id="googlemaps" style="height: 100%;width: 100%;"></div>'}
            ]}
        ]
    });

    $$("list_input").attachEvent("onTimedKeyPress",function(){
        var value = this.getValue().toLowerCase(); //input data is derived
        $$("leftmenu").filter('#name#', value);
    });
</script>
</body>
</html>


</script>
</body>
</html>

